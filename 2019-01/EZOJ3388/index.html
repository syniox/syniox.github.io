<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>[EZOJ3388] 排序 - Blog | qzkszj</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0/normalize.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0/build/pure-min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0/build/grids-responsive-min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js/styles/atom-one-light.css"><style>.category-list-item{display:flex}.category-list-link{flex:1 0 auto}.category-list-count{text-align:right}.post .post-content pre code{padding:0 0}</style><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Blog | qzkszj" type="application/atom+xml"></head><body class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">[EZOJ3388] 排序</h1><a id="logo" href="/">Blog | qzkszj</a><p class="description">过往如烟。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined">Home</i></a><a href="/archives/"><i class="fa undefined"> Archive</i></a><a href="/about/"><i class="fa undefined"> About</i></a><a href="/atom.xml"><i class="fa undefined"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">[EZOJ3388] 排序</h1><div class="post-meta">January 09,2019<span> | </span><span class="category"><a href="/categories/Solution/">Solution</a></span><span> | 643,2 mins.</span><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span></span><span id="busuanzi_container_page_pv"> | views: <span id="busuanzi_value_page_pv"></span></span></div><div class="tags"></div><div class="post-content"><pre><code class="hljs language-cpp">cnt=<span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; ++i)&#123;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i+<span class="hljs-number">1</span>; j&lt;=n; ++j)&#123;
		<span class="hljs-keyword">if</span>(a[i]&gt;a[j]) <span class="hljs-built_in">swap</span>(a[i],a[j]);
		++cnt;
	&#125;
&#125;
</code></pre><p>给出一个排列a(1…n)和值cnt。<br>对a进行上述操作，cnt刚好为题目给定的值时的a序列。</p><p>把零散的放最后暴力处理。<br>定义一轮操作是跑一遍j。<br>对于一轮操作，可以看作是从数列中拿出一些数进行轮换。<br>不考虑稳定的前面的区间，发现对于一个&quot;前缀&quot;区间实际上是把这个区间的最小数扔到了后面。<br>现在考虑第i位。<br>以i结尾的区间会把这个区间最小值扔到后面。<br>以i-1结尾的区间也会把这个区间的最小值扔到后面。<br>当i-1结尾的区间扔出来的值比i小的时候，i是不会动的。<br>当i-1结尾的区间扔出来的值比i大的时候，i上的值是这个区间的最小值，而且现在会被前面扔出来的值踢下去。<br>进行一轮操作，对第i位的影响可以看成让i和把i前面最小的取一次max。<br>现在进行k轮，对于第i位的影响其实是对前面的k个最小值取一次max。<br>用堆维护第k小值，对后面的区间的每一位取一次max。</p><p><a target="_blank" rel="noopener" href="https://github.com/syniox/Online_Judge_solutions/blob/master/XSY/3388.cpp">code</a>:</p><pre><code class="hljs language-cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span>
<span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> lint;
<span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e6</span>+<span class="hljs-number">5</span>;
<span class="hljs-type">int</span> n,val[N];
lint m;

<span class="hljs-keyword">namespace</span> IO&#123;
	<span class="hljs-type">const</span> <span class="hljs-type">int</span> SIZE=<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">16</span>;
	<span class="hljs-type">char</span> ibuf[SIZE],*ih,*it,obuf[SIZE],*oh=obuf,*ot=obuf+SIZE;
	<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">flush</span><span class="hljs-params">()</span></span>&#123;
		<span class="hljs-built_in">fwrite</span>(obuf,<span class="hljs-number">1</span>,oh-obuf,stdout);
		oh=obuf;
	&#125;
	<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Flusher</span>&#123;
		~<span class="hljs-built_in">Flusher</span>()&#123;<span class="hljs-built_in">flush</span>();&#125;;
	&#125;_flusher;
	<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">put_c</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> c)</span></span>&#123;
		*oh++=c;
		<span class="hljs-keyword">if</span>(oh==ot) <span class="hljs-built_in">flush</span>();
	&#125;
	<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">char</span> <span class="hljs-title">get_c</span><span class="hljs-params">()</span></span>&#123;
		<span class="hljs-keyword">if</span>(ih==it)&#123;
			it=(ih=ibuf)+<span class="hljs-built_in">fread</span>(ibuf,<span class="hljs-number">1</span>,SIZE,stdin);
			<span class="hljs-keyword">if</span>(ih==it) <span class="hljs-keyword">return</span> EOF;
		&#125;
		<span class="hljs-keyword">return</span> *ih++;
	&#125;
	<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt; <span class="hljs-function"><span class="hljs-keyword">inline</span> T <span class="hljs-title">nxi</span><span class="hljs-params">()</span></span>&#123;
		T x=<span class="hljs-number">0</span>;
		<span class="hljs-type">char</span> c;
		<span class="hljs-keyword">while</span>((c=<span class="hljs-built_in">getchar</span>())&gt;<span class="hljs-string">&#x27;9&#x27;</span>||c&lt;<span class="hljs-string">&#x27;0&#x27;</span>);
		<span class="hljs-keyword">while</span>(x=x*<span class="hljs-number">10</span><span class="hljs-number">-48</span>+c,(c=<span class="hljs-built_in">getchar</span>())&gt;=<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="hljs-string">&#x27;9&#x27;</span>);
		<span class="hljs-keyword">return</span> x;
	&#125;
	<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt; <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">pti</span><span class="hljs-params">(T x)</span></span>&#123;
		<span class="hljs-type">static</span> <span class="hljs-type">char</span> tmp[<span class="hljs-number">20</span>];
		<span class="hljs-type">char</span> *pt=tmp;
		<span class="hljs-keyword">if</span>(!x) <span class="hljs-built_in">put_c</span>(<span class="hljs-string">&#x27;0&#x27;</span>);
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> y=x/<span class="hljs-number">10</span>; x; x=y,y=x/<span class="hljs-number">10</span>)&#123;
			*pt++=x-y*<span class="hljs-number">10</span>+<span class="hljs-string">&#x27;0&#x27;</span>;
		&#125;
		<span class="hljs-keyword">while</span>(pt!=tmp) <span class="hljs-built_in">put_c</span>(*--pt);
	&#125;
&#125;
<span class="hljs-keyword">using</span> IO::nxi;
<span class="hljs-keyword">using</span> IO::pti;
<span class="hljs-keyword">using</span> IO::get_c;
<span class="hljs-keyword">using</span> IO::put_c;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span></span>&#123;
	std::priority_queue &lt;<span class="hljs-type">int</span>&gt; pq;
	<span class="hljs-type">int</span> len=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">while</span>(len&lt;=n&amp;&amp;m&gt;=n-len<span class="hljs-number">-1</span>)&#123;
		m-=n-++len;
	&#125;
	<span class="hljs-keyword">if</span>(len)&#123;
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=len; ++i)&#123;
			pq.<span class="hljs-built_in">push</span>(val[i]);
			val[i]=i;
		&#125;
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=len+<span class="hljs-number">1</span>; i&lt;=n; ++i)&#123;
			<span class="hljs-keyword">if</span>(val[i]&lt;pq.<span class="hljs-built_in">top</span>())&#123;
				pq.<span class="hljs-built_in">push</span>(val[i]);
				val[i]=pq.<span class="hljs-built_in">top</span>();
				pq.<span class="hljs-built_in">pop</span>();
			&#125;
		&#125;
	&#125;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>; j&lt;=m; ++j)&#123;
		<span class="hljs-keyword">if</span>(val[len+<span class="hljs-number">1</span>]&gt;val[len+<span class="hljs-number">1</span>+j])&#123;
			std::<span class="hljs-built_in">swap</span>(val[len+<span class="hljs-number">1</span>],val[len+<span class="hljs-number">1</span>+j]);
		&#125;
	&#125;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; ++i)&#123;
		<span class="hljs-built_in">pti</span>(val[i]);
		<span class="hljs-built_in">put_c</span>(<span class="hljs-string">&#x27; &#x27;</span>);
	&#125;
	<span class="hljs-built_in">put_c</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);
&#125;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;
	n=<span class="hljs-built_in">nxi</span>&lt;<span class="hljs-type">int</span>&gt;(),m=<span class="hljs-built_in">nxi</span>&lt;lint&gt;();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; ++i)&#123;
		val[i]=<span class="hljs-built_in">nxi</span>&lt;<span class="hljs-type">int</span>&gt;();
	&#125;
	<span class="hljs-built_in">solve</span>();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
&#125;

</code></pre></div><div class="page-navigator"><a class="pre" href="/2019-01/EZOJ3384/">Previous</a><a class="next" href="/2019-01/poly/">Next</a></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><div class="widget-title">Categories</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Note/">Note</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Recollections/">Recollections</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Solution/">Solution</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Starred/">Starred</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title">Tags</div><div class="tagcloud"><a href="/tags/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/" style="font-size:15px">组合数学</a> <a href="/tags/DP-%E4%BC%98%E5%8C%96/" style="font-size:15px">DP/优化</a> <a href="/tags/%E6%95%B0%E8%AE%BA/" style="font-size:16px">数论</a> <a href="/tags/%E5%AE%B9%E6%96%A5/" style="font-size:13px">容斥</a> <a href="/tags/%E9%9B%86%E5%90%88/" style="font-size:13px">集合</a> <a href="/tags/%E5%81%8F%E5%BA%8F/" style="font-size:13px">偏序</a> <a href="/tags/%E6%A0%91/" style="font-size:13px">树</a> <a href="/tags/%E6%8B%93%E6%89%91/" style="font-size:13px">拓扑</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E6%B5%81/" style="font-size:14px">网络流</a> <a href="/tags/%E7%BB%93%E8%AE%BA/" style="font-size:13px">结论</a> <a href="/tags/%E7%BE%A4%E8%AE%BA/" style="font-size:13px">群论</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size:13px">字符串</a> <a href="/tags/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/" style="font-size:13px">线性代数</a> <a href="/tags/%E7%9F%A9%E9%98%B5/" style="font-size:13px">矩阵</a> <a href="/tags/%E5%A4%9A%E9%A1%B9%E5%BC%8F/" style="font-size:14px">多项式</a> <a href="/tags/%E6%94%AF%E9%85%8D%E6%A0%91/" style="font-size:13px">支配树</a> <a href="/tags/%E5%9B%BE%E8%AE%BA/" style="font-size:14px">图论</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:13px">数学</a></div></div><div class="widget"><div class="widget-title">Links</div><ul class="links-list"><li class="links-list-item"><a href="https://cnblogs.com/dedicatus545" title="dedicatus545" target="_blank">dedicatus545</a></li></ul><ul class="links-list"><li class="links-list-item"><a href="https://blog.sshockwave.net" title="sshockwave" target="_blank">sshockwave</a></li></ul><ul class="links-list"><li class="links-list-item"><a href="https://www.cnblogs.com/dcdcbigbig/" title="DCDCbigbig" target="_blank">DCDCbigbig</a></li></ul><ul class="links-list"><li class="links-list-item"><a href="https://www.cnblogs.com/JackyhhJuRuo/" title="Jackyhh" target="_blank">Jackyhh</a></li></ul></div></div></div></div><div id="footer">© <a href="/" real="nofollow">Blog | qzkszj.</a><i> Powered by </i><a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a></div></body></html>